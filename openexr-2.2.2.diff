# Fix patch version and restore SO version back to 22
# See https://github.com/AcademySoftwareFoundation/openexr/issues/250
diff -urNad openexr-2.2.1-orig/CMakeLists.txt openexr-2.2.1/CMakeLists.txt
--- openexr-2.2.1-orig/CMakeLists.txt	2017-11-18 01:00:24.000000000 +0200
+++ openexr-2.2.1/CMakeLists.txt	2017-12-10 13:38:48.999738238 +0200
@@ -4,7 +4,7 @@
 
 SET(OPENEXR_VERSION_MAJOR "2")
 SET(OPENEXR_VERSION_MINOR "2")
-SET(OPENEXR_VERSION_PATCH "0")
+SET(OPENEXR_VERSION_PATCH "1")
 
 SET(OPENEXR_VERSION ${OPENEXR_VERSION_MAJOR}.${OPENEXR_VERSION_MINOR}.${OPENEXR_VERSION_PATCH})
 SET(OPENEXR_VERSION_API ${OPENEXR_VERSION_MAJOR}_${OPENEXR_VERSION_MINOR})
@@ -172,8 +172,8 @@
 
 SET_TARGET_PROPERTIES ( IlmImf
   PROPERTIES
-  VERSION 23.0.0
-  SOVERSION 23
+  VERSION 22.0.0
+  SOVERSION 22
   OUTPUT_NAME "IlmImf${OPENEXR_LIBSUFFIX}"
   )
   
@@ -184,8 +184,8 @@
 
 SET_TARGET_PROPERTIES ( IlmImfUtil
   PROPERTIES
-  VERSION 23.0.0
-  SOVERSION 23
+  VERSION 22.0.0
+  SOVERSION 22
   OUTPUT_NAME "IlmImfUtil${OPENEXR_LIBSUFFIX}"
   )
   
diff -urNad openexr-2.2.1-orig/configure openexr-2.2.1/configure
--- openexr-2.2.1-orig/configure	2017-11-18 01:09:24.000000000 +0200
+++ openexr-2.2.1/configure	2017-12-10 13:39:33.649928968 +0200
@@ -3174,7 +3174,7 @@
 
 
 
-LIBTOOL_CURRENT=23
+LIBTOOL_CURRENT=22
 LIBTOOL_REVISION=0
 LIBTOOL_AGE=0
 LIBTOOL_VERSION=$LIBTOOL_CURRENT:$LIBTOOL_REVISION:$LIBTOOL_AGE
diff -urNad openexr-2.2.1-orig/configure.ac openexr-2.2.1/configure.ac
--- openexr-2.2.1-orig/configure.ac	2017-11-18 01:00:26.000000000 +0200
+++ openexr-2.2.1/configure.ac	2017-12-10 13:39:12.173761182 +0200
@@ -16,7 +16,7 @@
 AM_MAINTAINER_MODE
 
 
-LIBTOOL_CURRENT=23
+LIBTOOL_CURRENT=22
 LIBTOOL_REVISION=0
 LIBTOOL_AGE=0
 LIBTOOL_VERSION=$LIBTOOL_CURRENT:$LIBTOOL_REVISION:$LIBTOOL_AGE
